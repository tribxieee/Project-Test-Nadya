<!DOCTYPE html>
<html>
<head>
  <title>Purchases</title>
  <link rel="stylesheet" href="/style.css">
</head>
<body>
  <div class="container page">

    <div class="page-header">
      <h1>Purchase History</h1>
      <div class="actions">
        <a class="btn secondary" href="/">Products</a>
      </div>
    </div>

    <div class="card">
      <div class="card-header">Transactions</div>
      <div class="card-body">
        <table>
          <thead>
            <tr>
              <th>ID</th>
              <th>Product</th>
              <th>Qty</th>
              <th>Total</th>
              <th>Status</th>
              <th style="text-align:right">Action</th>
            </tr>
          </thead>
          <tbody>
            <% purchases.forEach(p => { %>
            <tr>
              <td><%= p.id %></td>
              <td><%= p.name %></td>
              <td><%= p.quantity %></td>
              <td>Rp <%= p.total_price %></td>
              <td>
                <span class="badge <%= p.status === 'ACTIVE' ? 'active' : 'cancelled' %>">
                  <%= p.status %>
                </span>
              </td>
              <td class="action">
                <% if (p.status === 'ACTIVE') { %>
                  <form action="/cancel/<%= p.id %>" method="POST">
                    <button class="btn danger">Cancel</button>
                  </form>
                <% } %>
              </td>
            </tr>
            <% }) %>
          </tbody>
        </table>
      </div>
    </div>

  </div>
</body>
</html>
